<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>e-Panchayath - Test UID numeric</title>
</head>
<body>
  <h2>Enter User ID (example: MPO-123)</h2>
  <input id="uid" placeholder="Enter User ID" />
  <button id="btn">Send</button>

  <pre id="out" style="background:#f5f5f5;padding:10px;"></pre>

  <script>
    document.getElementById('btn').addEventListener('click', async () => {
      const raw = document.getElementById('uid').value.trim();
      if (!raw) { alert('Please enter User ID'); return; }

      // extract numeric digits only
      const numericId = raw.replace(/\D/g, '');
      if (!numericId) { alert('User ID must contain digits'); return; }

      // build backend URL (CHANGE THIS to your deployed backend)
      const backendBase = 'https://tgprepanchayat.telangana.gov.in/PSPerformance/home?Parameter1=*****,2
      const apiUrl = `${backendBase}/api/report?uid=${encodeURIComponent(numericId)}`;

      const out = document.getElementById('out');
      out.textContent = 'Requesting: ' + apiUrl + '\n\n';

      try {
        const resp = await fetch(apiUrl);
        if (!resp.ok) {
          const txt = await resp.text();
          out.textContent += 'Error from backend: ' + resp.status + '\\n' + txt;
          return;
        }
        const data = await resp.json();
        out.textContent += JSON.stringify(data, null, 2);
      } catch (err) {
        out.textContent += 'Network error: ' + err.message;
      }
    });
  </script>
</body>
</html>
